<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧降噪 | Smart Denoise</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <a href="../../" class="back-link" data-i18n="backToHome">← 返回首頁</a>
                    <span class="tool-badge" data-i18n="toolNumber">工具 #015</span>
                </div>
                <div class="lang-switch">
                    <button class="lang-btn active" id="lang-zh">中文</button>
                    <button class="lang-btn" id="lang-en">EN</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="title-section">
                <h1 data-i18n="title">智慧降噪</h1>
                <p class="subtitle" data-i18n="subtitle">AI 智慧降低圖片噪點，完美保留細節與紋理</p>
                <div class="privacy-badge">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    <span data-i18n="privacyBadge">100% 本地處理 · 零資料上傳</span>
                </div>
            </div>

            <!-- Model Loading -->
            <div class="model-loading" id="modelLoading">
                <div class="loading-content">
                    <div class="loading-icon">
                        <div class="noise-animation">
                            <span></span><span></span><span></span>
                            <span></span><span></span><span></span>
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                    <h3 data-i18n="loadingModel">正在載入降噪模型...</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="loadProgress"></div>
                    </div>
                    <p class="loading-hint" id="loadingStatus" data-i18n="loadingHint">首次載入需下載約 30 MB 模型檔案</p>
                </div>
            </div>

            <!-- Upload Area -->
            <div class="upload-area" id="uploadArea" style="display: none;">
                <div class="upload-content">
                    <svg class="upload-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <p class="upload-text" data-i18n="uploadText">點擊或拖放圖片到這裡</p>
                    <p class="upload-hint" data-i18n="uploadHint">支援 JPG、PNG、WebP 格式</p>
                    <div class="use-cases">
                        <span class="case-tag">📸 高 ISO 雜訊</span>
                        <span class="case-tag">🌙 低光源照片</span>
                        <span class="case-tag">📱 手機夜拍</span>
                    </div>
                </div>
                <input type="file" id="fileInput" accept="image/jpeg,image/png,image/webp" hidden>
            </div>

            <!-- Editor Area -->
            <div class="editor-area" id="editorArea" style="display: none;">
                <!-- Preview Section -->
                <div class="preview-section">
                    <div class="preview-header">
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="split">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                                    <line x1="12" y1="3" x2="12" y2="21"></line>
                                </svg>
                                <span data-i18n="viewSplit">對比</span>
                            </button>
                            <button class="view-btn" data-view="original">
                                <span data-i18n="viewOriginal">原圖</span>
                            </button>
                            <button class="view-btn" data-view="result">
                                <span data-i18n="viewResult">降噪後</span>
                            </button>
                        </div>
                        <div class="zoom-controls">
                            <button class="zoom-btn" data-zoom="fit" data-i18n="zoomFit">適應</button>
                            <button class="zoom-btn active" data-zoom="100">100%</button>
                            <button class="zoom-btn" data-zoom="200">200%</button>
                        </div>
                    </div>
                    <div class="preview-container" id="previewContainer">
                        <div class="canvas-wrapper" id="canvasWrapper">
                            <canvas id="originalCanvas"></canvas>
                            <canvas id="resultCanvas"></canvas>
                            <div class="split-line" id="splitLine">
                                <div class="split-handle"></div>
                            </div>
                        </div>
                        <div class="preview-labels" id="previewLabels">
                            <span class="label-left" data-i18n="noisy">有噪點</span>
                            <span class="label-right" data-i18n="denoised">已降噪</span>
                        </div>
                    </div>
                </div>

                <!-- Controls Section -->
                <div class="controls-section">
                    <!-- Denoise Mode -->
                    <div class="control-group">
                        <label class="control-label" data-i18n="denoiseMode">降噪模式</label>
                        <div class="mode-selector">
                            <button class="mode-btn active" data-mode="auto">
                                <span class="mode-icon">🤖</span>
                                <span data-i18n="modeAuto">自動</span>
                            </button>
                            <button class="mode-btn" data-mode="light">
                                <span class="mode-icon">🌤️</span>
                                <span data-i18n="modeLight">輕度</span>
                            </button>
                            <button class="mode-btn" data-mode="strong">
                                <span class="mode-icon">🌙</span>
                                <span data-i18n="modeStrong">強力</span>
                            </button>
                        </div>
                    </div>

                    <!-- Denoise Strength -->
                    <div class="control-group">
                        <label class="control-label" data-i18n="denoiseStrength">降噪強度</label>
                        <div class="slider-control">
                            <input type="range" class="slider" id="strengthSlider" min="0" max="100" value="50">
                            <span class="slider-value" id="strengthValue">50</span>
                        </div>
                        <div class="strength-labels">
                            <span data-i18n="preserveDetail">保留細節</span>
                            <span data-i18n="maxDenoise">最大降噪</span>
                        </div>
                    </div>

                    <!-- Detail Preservation -->
                    <div class="control-group">
                        <label class="control-label" data-i18n="detailPreserve">細節保留</label>
                        <div class="slider-control">
                            <input type="range" class="slider" id="detailSlider" min="0" max="100" value="70">
                            <span class="slider-value" id="detailValue">70</span>
                        </div>
                    </div>

                    <!-- Color Noise -->
                    <div class="control-group">
                        <label class="control-label" data-i18n="colorNoise">色彩噪點</label>
                        <div class="slider-control">
                            <input type="range" class="slider" id="colorSlider" min="0" max="100" value="50">
                            <span class="slider-value" id="colorValue">50</span>
                        </div>
                    </div>

                    <!-- Apply Button -->
                    <button class="btn btn-apply" id="applyBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        <span data-i18n="applyDenoise">套用降噪</span>
                    </button>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn btn-secondary" id="resetBtn">
                            <span data-i18n="newImage">選擇新圖片</span>
                        </button>
                        <button class="btn btn-primary" id="downloadBtn">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            <span data-i18n="download">下載</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Processing Overlay -->
            <div class="processing-overlay" id="processingOverlay" style="display: none;">
                <div class="processing-content">
                    <div class="processing-spinner"></div>
                    <p class="processing-text" data-i18n="processing">正在降噪處理中...</p>
                    <p class="processing-hint" data-i18n="processingHint">AI 正在分析並移除噪點</p>
                </div>
            </div>

            <!-- How It Works -->
            <section class="info-section">
                <h2 data-i18n="howItWorks">如何運作？</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-icon">🔍</div>
                        <h3 data-i18n="step1Title">噪點分析</h3>
                        <p data-i18n="step1Desc">AI 分析圖片中的噪點類型與分布</p>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">🧠</div>
                        <h3 data-i18n="step2Title">智慧識別</h3>
                        <p data-i18n="step2Desc">區分噪點與真實細節紋理</p>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">✨</div>
                        <h3 data-i18n="step3Title">選擇性降噪</h3>
                        <p data-i18n="step3Desc">只移除噪點，保留重要細節</p>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">🖼️</div>
                        <h3 data-i18n="step4Title">品質輸出</h3>
                        <p data-i18n="step4Desc">輸出清晰乾淨的高品質圖片</p>
                    </div>
                </div>
            </section>

            <!-- Tech Specs -->
            <section class="specs-section">
                <h2 data-i18n="techSpecs">技術規格</h2>
                <div class="specs-grid">
                    <div class="spec-item">
                        <span class="spec-label" data-i18n="specModel">AI 模型</span>
                        <span class="spec-value">NAFNet</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label" data-i18n="specMethod">處理方式</span>
                        <span class="spec-value" data-i18n="specMethodValue">邊緣保留降噪</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label" data-i18n="specInput">輸入格式</span>
                        <span class="spec-value">JPG, PNG, WebP</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label" data-i18n="specOutput">輸出格式</span>
                        <span class="spec-value">PNG</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p data-i18n="copyright">Awesome AI Local Tools © 2024</p>
        </footer>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>

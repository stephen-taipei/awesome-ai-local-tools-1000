let currentLang='zh-TW';const setLanguage=l=>{currentLang=l;document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));document.getElementById(`lang-${l==='zh-TW'?'zh':'en'}`).classList.add('active')};const extractSentences=t=>t.split(/[。！？.!?\n]+/).filter(s=>s.trim().length>10).map(s=>s.trim());function generate5W1H(text){const sentences=extractSentences(text);const who=sentences.find(s=>s.includes('人')||s.includes('者')||/who|person|people/i.test(s))||sentences[0];const what=sentences.find(s=>s.includes('表示')||s.includes('宣布')||/said|announced/i.test(s))||sentences[1];const when=sentences.find(s=>/\d+[年月日]|\d{4}|today|yesterday/i.test(s))||'';const where=sentences.find(s=>s.includes('在')||/in|at/i.test(s))||'';const why=sentences.find(s=>s.includes('因為')||s.includes('原因')||/because|reason/i.test(s))||'';const how=sentences.find(s=>s.includes('透過')||s.includes('方式')||/through|by/i.test(s))||'';return currentLang==='zh-TW'?`誰 (Who): ${who}\n什麼 (What): ${what}\n何時 (When): ${when||'未提及'}\n何地 (Where): ${where||'未提及'}\n為何 (Why): ${why||'未提及'}\n如何 (How): ${how||'未提及'}`:`Who: ${who}\nWhat: ${what}\nWhen: ${when||'Not mentioned'}\nWhere: ${where||'Not mentioned'}\nWhy: ${why||'Not mentioned'}\nHow: ${how||'Not mentioned'}`}function generateHeadline(text){const sentences=extractSentences(text);return sentences.slice(0,2).join(currentLang==='zh-TW'?'。':'.')+'.'}function generateBullets(text){const sentences=extractSentences(text);return sentences.slice(0,5).map(s=>'• '+s).join('\n')}function generateSummary(text,format){switch(format){case '5w1h':return generate5W1H(text);case 'bullets':return generateBullets(text);default:return generateHeadline(text)}}function init(){setLanguage(navigator.language.startsWith('zh')?'zh-TW':'en');document.getElementById('lang-zh').addEventListener('click',()=>setLanguage('zh-TW'));document.getElementById('lang-en').addEventListener('click',()=>setLanguage('en'));document.getElementById('generateBtn').addEventListener('click',()=>{const news=document.getElementById('newsInput').value.trim();const format=document.getElementById('formatSelect').value;if(!news){alert(currentLang==='zh-TW'?'請輸入新聞內容':'Please enter news content');return}const summary=generateSummary(news,format);document.getElementById('outputContent').textContent=summary;document.getElementById('outputSection').style.display='block'});document.getElementById('copyBtn').addEventListener('click',()=>{navigator.clipboard.writeText(document.getElementById('outputContent').textContent)})}init();

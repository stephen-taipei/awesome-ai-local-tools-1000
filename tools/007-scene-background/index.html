<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Scene Background | AI 場景背景庫</title>
    <meta name="description" content="Apply preset scene backgrounds to your photos. 100% local processing.">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Language Switcher -->
        <div class="lang-switcher">
            <button id="lang-zh" class="lang-btn active">繁體中文</button>
            <button id="lang-en" class="lang-btn">English</button>
        </div>

        <!-- Header -->
        <header class="header">
            <h1 data-i18n="title">AI 場景背景庫</h1>
            <p class="subtitle" data-i18n="subtitle">提供預設場景背景，一鍵套用至去背圖片</p>
        </header>

        <!-- Privacy Badge -->
        <div class="privacy-badge">
            <span class="badge-icon">🔒</span>
            <span data-i18n="privacyBadge">100% 本地處理 · 零資料上傳</span>
        </div>

        <!-- Model Status -->
        <div class="model-status" id="modelStatus">
            <div class="status-indicator" id="statusIndicator"></div>
            <span id="statusText" data-i18n="modelNotLoaded">模型未載入</span>
            <button id="loadModelBtn" class="btn btn-primary btn-sm" data-i18n="loadModel">載入模型</button>
        </div>

        <!-- Progress Container -->
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-info">
                <span id="progressText" data-i18n="downloading">正在下載模型...</span>
                <span id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-note" data-i18n="downloadNote">首次載入約 176MB，之後會快取</p>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Upload Area -->
            <div class="upload-area" id="uploadArea" style="display: none;">
                <input type="file" id="fileInput" accept="image/png,image/jpeg,image/webp" hidden>
                <div class="upload-icon">👤</div>
                <p class="upload-text" data-i18n="uploadText">上傳您的照片</p>
                <p class="upload-hint" data-i18n="uploadHint">AI 將自動移除背景並套用場景</p>
            </div>

            <!-- Editor Area -->
            <div class="editor-area" id="editorArea" style="display: none;">
                <div class="editor-layout">
                    <!-- Preview Section -->
                    <div class="preview-section">
                        <div class="preview-box" id="previewBox">
                            <canvas id="resultCanvas"></canvas>
                            <div class="processing-overlay" id="processingOverlay" style="display: none;">
                                <div class="spinner"></div>
                                <p id="processingText" data-i18n="processing">正在處理中...</p>
                            </div>
                        </div>
                        <div class="preview-actions">
                            <button id="resetBtn" class="btn btn-secondary" data-i18n="newImage">選擇新圖片</button>
                            <button id="downloadBtn" class="btn btn-primary" data-i18n="download">下載結果</button>
                        </div>
                    </div>

                    <!-- Controls Section -->
                    <div class="controls-section">
                        <!-- Scene Selection -->
                        <div class="control-group">
                            <h3 data-i18n="selectScene">選擇場景</h3>
                            <div class="scene-categories">
                                <button class="category-btn active" data-category="all" data-i18n="catAll">全部</button>
                                <button class="category-btn" data-category="office" data-i18n="catOffice">辦公室</button>
                                <button class="category-btn" data-category="nature" data-i18n="catNature">自然</button>
                                <button class="category-btn" data-category="city" data-i18n="catCity">城市</button>
                                <button class="category-btn" data-category="abstract" data-i18n="catAbstract">抽象</button>
                            </div>
                            <div class="scene-grid" id="sceneGrid">
                                <!-- Scene thumbnails will be inserted here -->
                            </div>
                        </div>

                        <!-- Position Adjustment -->
                        <div class="control-group">
                            <h3 data-i18n="adjustPosition">調整位置</h3>
                            <div class="position-controls">
                                <div class="slider-row">
                                    <label data-i18n="scale">縮放</label>
                                    <input type="range" id="scaleSlider" min="20" max="200" value="100">
                                    <span id="scaleValue">100%</span>
                                </div>
                                <div class="slider-row">
                                    <label data-i18n="positionX">水平</label>
                                    <input type="range" id="positionXSlider" min="-100" max="100" value="0">
                                    <span id="positionXValue">0</span>
                                </div>
                                <div class="slider-row">
                                    <label data-i18n="positionY">垂直</label>
                                    <input type="range" id="positionYSlider" min="-100" max="100" value="0">
                                    <span id="positionYValue">0</span>
                                </div>
                            </div>
                            <button id="centerBtn" class="btn btn-outline btn-sm" data-i18n="centerSubject">置中主體</button>
                        </div>

                        <!-- Custom Background -->
                        <div class="control-group">
                            <h3 data-i18n="customBackground">自訂背景</h3>
                            <div class="custom-bg-row">
                                <button id="uploadBgBtn" class="btn btn-outline" data-i18n="uploadBackground">上傳背景圖</button>
                                <input type="file" id="bgFileInput" accept="image/png,image/jpeg,image/webp" hidden>
                            </div>
                            <div class="color-row">
                                <label data-i18n="solidColor">純色背景</label>
                                <input type="color" id="bgColorInput" value="#ffffff">
                                <button id="applyColorBtn" class="btn btn-sm" data-i18n="apply">套用</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Scene Library Info -->
        <section class="info-section">
            <h2 data-i18n="sceneLibrary">場景背景庫</h2>
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-icon">🏢</div>
                    <h3 data-i18n="officeScenes">辦公場景</h3>
                    <p data-i18n="officeScenesDesc">專業會議室、現代辦公室背景</p>
                </div>
                <div class="info-card">
                    <div class="info-icon">🌿</div>
                    <h3 data-i18n="natureScenes">自然風景</h3>
                    <p data-i18n="natureScenesDesc">山林、海灘、花園等自然背景</p>
                </div>
                <div class="info-card">
                    <div class="info-icon">🌆</div>
                    <h3 data-i18n="cityScenes">城市街景</h3>
                    <p data-i18n="cityScenesDesc">都市街道、建築、夜景背景</p>
                </div>
                <div class="info-card">
                    <div class="info-icon">🎨</div>
                    <h3 data-i18n="abstractScenes">抽象背景</h3>
                    <p data-i18n="abstractScenesDesc">漸層、紋理、藝術風格背景</p>
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section class="how-it-works">
            <h2 data-i18n="howItWorks">如何運作？</h2>
            <div class="steps-grid">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3 data-i18n="step1Title">上傳照片</h3>
                    <p data-i18n="step1Desc">選擇含有人物或主體的照片</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3 data-i18n="step2Title">AI 去背</h3>
                    <p data-i18n="step2Desc">自動移除原有背景</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3 data-i18n="step3Title">選擇場景</h3>
                    <p data-i18n="step3Desc">從場景庫中選擇喜歡的背景</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <h3 data-i18n="step4Title">下載成品</h3>
                    <p data-i18n="step4Desc">調整位置後下載合成圖片</p>
                </div>
            </div>
        </section>

        <!-- Tech Specs -->
        <section class="tech-specs">
            <h2 data-i18n="techSpecs">技術規格</h2>
            <table class="specs-table">
                <tr>
                    <td data-i18n="specModel">AI 模型</td>
                    <td>RMBG-1.4</td>
                </tr>
                <tr>
                    <td data-i18n="specSize">模型大小</td>
                    <td>~176 MB</td>
                </tr>
                <tr>
                    <td data-i18n="specScenes">預設場景</td>
                    <td>20+</td>
                </tr>
                <tr>
                    <td data-i18n="specOutput">輸出格式</td>
                    <td>PNG, JPG</td>
                </tr>
                <tr>
                    <td data-i18n="specRuntime">執行環境</td>
                    <td>WebGPU / WASM</td>
                </tr>
            </table>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>
                <a href="../README.md" data-i18n="backToHome">返回首頁</a> ·
                <span data-i18n="toolNumber">工具 #007</span>
            </p>
            <p class="copyright" data-i18n="copyright">Awesome AI Local Tools © 2024</p>
        </footer>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Background Replacement | æ™ºæ…§èƒŒæ™¯æ›¿æ›</title>
    <meta name="description" content="Replace image backgrounds locally in your browser with AI. No upload, 100% private.">
    <link rel="stylesheet" href="style.css">
    <style>
        .bg-options {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .bg-option-group {
            margin-bottom: 15px;
        }
        .bg-option-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
        }
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 8px;
            margin-top: 8px;
        }
        .preset-thumb {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .preset-thumb.active {
            border-color: #007bff;
        }
        .preset-thumb:hover {
            opacity: 0.8;
        }
        .custom-bg-input {
            display: none;
        }
        .custom-bg-label {
            display: inline-block;
            padding: 8px 12px;
            background: #e9ecef;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }
        .custom-bg-label:hover {
            background: #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Switcher -->
        <div class="lang-switcher">
            <button id="lang-zh" class="lang-btn active">ç¹é«”ä¸­æ–‡</button>
            <button id="lang-en" class="lang-btn">English</button>
        </div>

        <!-- Header -->
        <header class="header">
            <h1 data-i18n="title">æ™ºæ…§èƒŒæ™¯æ›¿æ›</h1>
            <p class="subtitle" data-i18n="subtitle">ç§»é™¤åŸèƒŒæ™¯å¾Œï¼Œä»¥ AI ç”Ÿæˆæˆ–ç”¨æˆ¶ä¸Šå‚³çš„èƒŒæ™¯æ›¿æ›</p>
        </header>

        <!-- Privacy Badge -->
        <div class="privacy-badge">
            <span class="badge-icon">ğŸ”’</span>
            <span data-i18n="privacyBadge">100% æœ¬åœ°è™•ç† Â· é›¶è³‡æ–™ä¸Šå‚³</span>
        </div>

        <!-- Model Status -->
        <div class="model-status" id="modelStatus">
            <div class="status-indicator" id="statusIndicator"></div>
            <span id="statusText" data-i18n="modelNotLoaded">æ¨¡å‹æœªè¼‰å…¥</span>
            <button id="loadModelBtn" class="btn btn-primary btn-sm" data-i18n="loadModel">è¼‰å…¥æ¨¡å‹</button>
        </div>

        <!-- Model Progress -->
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-info">
                <span id="progressText" data-i18n="downloading">æ­£åœ¨ä¸‹è¼‰æ¨¡å‹...</span>
                <span id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-note" data-i18n="progressNote">é¦–æ¬¡è¼‰å…¥éœ€ä¸‹è¼‰ç´„ 176MBï¼Œä¹‹å¾Œæœƒå¿«å–è‡³æœ¬åœ°</p>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Upload Area -->
            <div class="upload-area" id="uploadArea">
                <input type="file" id="fileInput" accept="image/png,image/jpeg,image/webp" hidden>
                <div class="upload-icon">ğŸ“·</div>
                <p class="upload-text" data-i18n="uploadText">æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤è™•æˆ–é»æ“Šä¸Šå‚³</p>
                <p class="upload-hint" data-i18n="uploadHint">æ”¯æ´ PNGã€JPGã€WebP (æœ€å¤§ 4096x4096)</p>
            </div>

            <!-- Preview Area -->
            <div class="preview-area" id="previewArea" style="display: none;">
                <div class="image-container">
                    <div class="image-box">
                        <h3 data-i18n="original">åŸåœ–</h3>
                        <div class="image-wrapper">
                            <img id="originalImage" alt="Original">
                        </div>
                    </div>
                    <div class="image-box">
                        <h3 data-i18n="result">æ›¿æ›çµæœ</h3>
                        <div class="image-wrapper checkered-bg">
                            <img id="resultImage" alt="Result" style="display: none;">
                            <div class="processing-overlay" id="processingOverlay">
                                <div class="spinner"></div>
                                <p data-i18n="processing">æ­£åœ¨è™•ç†ä¸­...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Background Options -->
                <div class="bg-options">
                    <div class="bg-option-group">
                        <span class="bg-option-title" data-i18n="colorBg">ç´”è‰²èƒŒæ™¯</span>
                        <div class="color-picker-wrapper">
                            <input type="color" id="bgColorPicker" value="#ffffff">
                            <span id="bgColorValue">#FFFFFF</span>
                            <button id="transparentBgBtn" class="btn btn-sm btn-outline" data-i18n="transparent">é€æ˜</button>
                        </div>
                    </div>

                    <div class="bg-option-group">
                        <span class="bg-option-title" data-i18n="imageBg">åœ–ç‰‡èƒŒæ™¯</span>
                        <label class="custom-bg-label">
                            <span data-i18n="uploadBg">ä¸Šå‚³èƒŒæ™¯åœ–</span>
                            <input type="file" id="bgFileInput" accept="image/*" class="custom-bg-input">
                        </label>
                        <div class="preset-grid" id="presetBgGrid">
                            <!-- Preset backgrounds will be added here via JS -->
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="actions">
                    <button id="downloadBtn" class="btn btn-success" disabled data-i18n="download">ä¸‹è¼‰åœ–ç‰‡</button>
                    <button id="resetBtn" class="btn btn-secondary" data-i18n="uploadAnother">ä¸Šå‚³å…¶ä»–åœ–ç‰‡</button>
                </div>
            </div>
        </main>

        <!-- Info Section -->
        <section class="info-section">
            <h2 data-i18n="howItWorks">å¦‚ä½•é‹ä½œï¼Ÿ</h2>
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-icon">ğŸ¤–</div>
                    <h3 data-i18n="aiModel">AI æ¨¡å‹</h3>
                    <p data-i18n="aiModelDesc">ä½¿ç”¨ RMBG-1.4 æ·±åº¦å­¸ç¿’æ¨¡å‹ç§»é™¤èƒŒæ™¯ï¼Œå†é€²è¡Œåˆæˆ</p>
                </div>
                <div class="info-card">
                    <div class="info-icon">ğŸ¨</div>
                    <h3 data-i18n="customBg">è‡ªå®šç¾©èƒŒæ™¯</h3>
                    <p data-i18n="customBgDesc">æ”¯æ´ç´”è‰²ã€é è¨­å ´æ™¯æˆ–ä¸Šå‚³è‡ªå·±çš„åœ–ç‰‡ä½œç‚ºèƒŒæ™¯</p>
                </div>
                <div class="info-card">
                    <div class="info-icon">ğŸ”’</div>
                    <h3 data-i18n="privacy">éš±ç§ä¿è­·</h3>
                    <p data-i18n="privacyDesc">æ‰€æœ‰è™•ç†åœ¨ç€è¦½å™¨æœ¬åœ°å®Œæˆï¼Œåœ–ç‰‡ä¸æœƒä¸Šå‚³è‡³ä»»ä½•ä¼ºæœå™¨</p>
                </div>
            </div>
        </section>

        <!-- Tech Specs -->
        <section class="tech-specs">
            <h2 data-i18n="techSpecs">æŠ€è¡“è¦æ ¼</h2>
            <table class="specs-table">
                <tr>
                    <td data-i18n="specModel">AI æ¨¡å‹</td>
                    <td>RMBG-1.4</td>
                </tr>
                <tr>
                    <td data-i18n="specFormat">æ¨¡å‹æ ¼å¼</td>
                    <td>ONNX</td>
                </tr>
                <tr>
                    <td data-i18n="specSize">æ¨¡å‹å¤§å°</td>
                    <td>~176 MB</td>
                </tr>
                <tr>
                    <td data-i18n="specRuntime">æ¨è«–å¼•æ“</td>
                    <td>Transformers.js + ONNX Runtime Web</td>
                </tr>
                <tr>
                    <td data-i18n="specAccel">åŠ é€Ÿæ–¹å¼</td>
                    <td id="accelerationMethod">-</td>
                </tr>
            </table>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>
                <a href="../../README.md" data-i18n="backToHome">è¿”å›é¦–é </a> Â·
                <span data-i18n="toolNumber">å·¥å…· #002</span> Â·
                <a href="https://github.com" target="_blank" data-i18n="sourceCode">åŸå§‹ç¢¼</a>
            </p>
            <p class="copyright" data-i18n="copyright">Awesome AI Local Tools Â© 2024</p>
        </footer>
    </div>

    <!-- Canvas for processing (hidden) -->
    <canvas id="processingCanvas" style="display: none;"></canvas>

    <script type="module" src="app.js"></script>
</body>
</html>
